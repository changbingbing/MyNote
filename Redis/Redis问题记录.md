1. 持久化方案RDB，正常关闭redis的情况下，会去快照完毕，保证数据不丢失，最后再执行关闭吗？
   答案：是的，正常关闭，会先进行持久化，再关闭。
2. AOF重写时,新文件从旧文件一边读一边写，当旧文件也有写操作时， 这时重写新文件的读线程和旧文件的写线程是并行的吗？ 
   答案：AOF重写时，会先一次性读取所有的AOF旧文件中的内容，然后进行计算，进行重写。此时新文件该没有开始写!而写新文件的时候，可能同时并行执行旧文件的读写。但是注意，这不是在一个进程中。
3. offset偏移量是如何保存的？同步一条数据就保存一次吗？ 
   答案：offset是在内存中的一个变量进行存储（不是在redis中存储的）同步一次，就会保存一次。
4. zk的leader选举机制和redis的哨兵机制异同点
   1. zookeeper选择是选择临时节点（最小或者最大的才是leader）；
   2. redis的选举机制（跟ip地址有关）后补？
5. redis的主从复制中的法定人数根据什么设置，这个人数最多是不是主从服务器之和的个数？
   答：redis主从复制中没有法定人数的设置，其实是设置的哨兵。一般这个法定人数（哨兵），都是哨兵节点的一半+1.
6. 如果一个master挂了，这个master节点下的子节点没升级，这也算整个redis集群fail？
   1. 因为集群选择slot进行存储的话，只会在master节点中去选择slot；
   2. 集群中的16384个slot槽，必须在所有的master节点中**连续存在，缺一不可**。
7. cluster中六台比较可靠，那么挂了一台后，剩下的五台怎么保证可靠性呢？
   1. 结合哨兵机制的理解，选举时，需要指定一个法定人数quorum；
   2. 集群默认的法定人数：(集群master节点数)/2+1
   3. 我说的6台是三主三从，其中如果挂了从机，集群没啥影响，如果挂了主机，则剩下两个主机，符合法定人数，依然可以将挂掉的主节点对应的从节点拉起为新的master主节点。
8. 集群每个redis节点自检，自检的意思是说它自己既“充当节点”又充当“哨兵角色”吗？
   1. 我说的自检，是指的集群任何节点，可以对其他节点进行检测。
   2. 你可以理解为集群中的所有master主节点，都兼任着哨兵的角色。
9. 如果集群任意master挂掉,且当前master没有slave，则集群进入fail状态。“任意master挂掉”意思是一个节点挂掉吗？如果一个节点挂掉，那么集群进入fail状态的话，这集群也太脆弱了吧？
   1. 首先你对“任意master挂掉”，就会导致集群fail的理解是对的
   2. 其次集群不脆弱，因为集群要想保证高可用，必须搭配N个slave，而不只是一个slave
10. 先更新DB再删redis中，a线程删redis时，不是已经更新DB了吗？怎么b线程还会读到DB的旧值呢？
    1. 首先你要对并发编程有所了解（任何非原子性操作，都有可能被其他线程侵入）
    2. 其次要对JDBC的更新操作有所了解（不是说执行了update操作，数据库的记录就立即刷新了，还有commit过程，还有数据落盘的流程，都是需要时间的）