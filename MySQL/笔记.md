1. 数据库本质就是文件系统，只是不同数据库通过不同数据格式来存储数据的。

2. 关系型数据库是指有行有列

3. 发展历程：
   1. 2000年Mysql诞生
   2. 2008年1月份被sun公司收购，发行5.0～5.5版本
   3. 2009年4月份被Oracle收购，发行5.5版本以后的版本
   4. 5.5后有了InnoDB,与索引有关

4. SQL-92标准,规范了最基础、最核心的内容

5. SQL分类
   1. DDL：表结构定义语言
   2. DML：数据操作语言insert,update,delete
   3. DCL：访问权限、安全等级、创建用户、关键字等操作
   4. DQL：查询操作select,from,where

6. MySQL在Linux环境中安装：
   1. yum：在线安装；rpm本地安装
   2. 赋密码
   3. 授权远程登录
   4. 修改防火墙（简单、粗暴，直接关闭）

7. 执行顺序：
   1. from->on->join->where->group by->having->select->distinct->order by->limit
   2. limit是mysql独有语法
   3. where后多个条件
      1. mysql是从左往右执行
      2. oracle是从右往左执行

8. 多个表关系：
   1. 一对一
   2. 一对多（多对多可视为双向的一对多）

9. crocs join：笛卡尔积连接（临时表，无where条件查询的多表查询都是笛卡尔积连接查询）

10. server层主要包括：连接器、解析器、优化器、执行器
  1. 连接器：用户、权限认证，建立连接
  2. 查询缓存：缓存是以sql脚本为key，记录结果为value；一旦该sql所操作的表有任何更新操作，则缓存清除。因此，缓存的意义并不大，在5.8版本后被取消掉了
  3. 解析器：此法解析、语法解析
     1. 词法解析：根据空格讲sql语句拆分，
     2. 语法解析：语法校验，并区分是DDL／DML等命令操作。因为不同类型的脚本处理方式不同。
  4. 优化器：主要优化索引，决定具体选择使用哪个索引，并形成执行计划。（即，如何使用索引，如何进行多表操作）
  5. 执行器：按照优化之后的sql执行计划完成对应的操作。

11. 存储引擎：真正的读写是通过存储引擎完成的
    1. mysql是多存储引擎的；
    2. 存储引擎是针对表的，即不同表可指定不同存储引擎

12. 解析器解析出DML中含where条件语句，则有优化器，主要优化索引（如何使用索引，如何）。

13. 表锁是在服务层，服务层是所有存储引擎共用的

14. 总结：哪些与存储引擎有关：表、行级所、事务、索引。
    ![image-20190110223102614](/Users/changbingbing/Library/Application Support/typora-user-images/image-20190110223102614.png)

15. 行锁：

    1. 目前流行的存储引擎中，只有InnoDB支持行锁

16. 删库可以通过二进制日志进行恢复

17. 性能分析需要慢查询日志辅助

18. select语句在隔离级别最高时，也会加锁，其它合理级别不加锁

19. 一个sql是否加锁、如何加锁是有前提条件的：![image-20190114205139764](/Users/changbingbing/Library/Application Support/typora-user-images/image-20190114205139764.png)

20. MVCC：乐观锁

21. 

    常兵

    

    

    ## 聊天区

    * 王加友

      

      999

    * 罗志豪

      

      ![img](https://static.csslcloud.net/img/em2/17.png)

    * 姚强

      

      ![img](https://static.csslcloud.net/img/em2/03.png)

    * 高明

      

      嗯

    * 王加友

      

      ![img](https://static.csslcloud.net/img/em2/12.png)

    * 黄云鹏

      

      1

    * 高明

      

      111

    * 韦炜

      

      1

    * 曹志

      

      22

    * 学宝

      

      我来了

    * 王加友

      

      ![img](https://static.csslcloud.net/img/em2/10.png)

    * 朱志宏

      

      11

    * 班主任

      

      能

    * 谭伟

      

      111

    * 詹子熙

      

      2

    * 魏志华

      

      222

    * 郁文忠

      

      2

    * 魏晨朝

      

      222

    * 黄云鹏

      

      RR如何解决不可重复读的

    * 魏志华

      

      才56人

    * 魏志华

      

      。。。。。

    * 高明

      

      嗯

    * 常兵

      

      可以

    * 高明

      

      可以

    * 学宝

      

      可以

    * 王加友

      

      可以

    * 魏志华

      

      很是可以

    * 李春扬

      

      ok

    * 于齐紫

      

      可以

    * 朱志宏

      

      可

    * 曹志

      

      阔以

    * 高明

      

      哈哈

    * 谭伟

      

      开年会去了

    * 学宝

      

      不晕 接着怼

    * 高明

      

      怼

    * 詹子熙

      

      雪豹牛逼

    * 高明

      

      豹子牛呀

    * 黄云鹏

      

      是RC通过给当前读加锁 来解决脏读

    * 曹志

      

      /////

    * 曹志

      

      g

    * 学宝

      

      会讲到MySQL备份？

    * 曹志

      

      g

    * 夏学方

      

      1

    * 高明

      

      1

    * 黄佐

      

      一样

    * 程丽京

      

      不一致

    * 王晋川

      

      不一致

    * 黄云鹏

      

      一样的

    * 詹子熙

      

      不一致

    * 罗志豪

      

      不一致

    * 陈建鑫

      

      no

    * 朱志宏

      

      不一致

    * 高明

      

      不

    * 张健

      

      不一致

    * 毛忠田

      

      no

    * 岳晓春

      

      no

    * 李进龙

      

      不一致

    * 李进龙

      

      读已提交

    * 王加友

      

      不一致

    * 张福宝

      

      不一致

    * 李春扬

      

      肯定不一致啊

    * 黄云鹏

      

      不一致。。。

    * 王晋川

      

      上节课的幻读啊

    * 徐彬

      

      不一致

    * 詹子熙

      

      RC不一致，RR一致

    * 谭伟

      

      一致

    * 黄佐

      

      可重复读

    * 学宝

      

      不一致

    * 学宝

      

      RC级别不一致

    * 张福宝

      

      RC 没有解决 可重复读

    * 高明

      

      MVCC select读不加锁

    * 黄佐

      

      读快照的数据

    * 兰健

      

      不是吧

    * 兰健

      

      第一次select的时候吧

    * 程丽京

      

      RC：视图是在每个 SQL 语句开始执行的时候创建的。 RR：视图是在事务启动时创建的，整个事务存在期间都用这个视图。

    * 学宝

      

      11

    * 王加友

      

      1

    * 罗志豪

      

      1

    * 张健

      

      1

    * 谭伟

      

      1

    * 朱志宏

      

      1

    * 王晋川

      

      1

    * 高明

      

      1

    * 詹子熙

      

      1

    * 张福宝

      

      1

    * 常兵

      

      1

    * 雷帅锋

      

      1

    * 高明

      

      不会

    * 周世杰

      

      蠕蠕的来，悄悄地看

    * 吴亚洲

      

      RR级别读的两次结果一致的话 ，这结果对么？

    * 张福宝

      

      意向锁是在哪一步加上去的呢？

    * 黄云鹏

      

      不是兼容吗。。。

    * 兰健

      

      加锁前

    * 学宝

      

      再加行锁之前加意向锁是吧

    * 李来恩

      

      解决幻读的结论是啥 是说要手动select for update吗

    * 高明

      

      rr

    * 高明

      

      可以解决幻读

    * 学宝

      

      想起了孔乙己

    * 詹子熙

      

      写数据

    * 黄云鹏

      

      锁和mvcc不一样的吧

    * Json

      

      中途过来听有点茫然![img](https://static.csslcloud.net/img/em2/01.png)

    * 毛忠田

      

      mvcc是为了解决行锁开销大设计出来的好像

    * 黄云鹏

      

      666

    * 学宝

      

      不能

    * 李春扬

      

      不能啊

    * 朱志宏

      

      不能

    * 高明

      

      不会吧

    * 罗志豪

      

      第一个不能

    * 曹志

      

      bu

    * 吴亚洲

      

      第一个条件 不是辅助索引的第一个 的都不会

    * 詹子熙

      

      第三个可以

    * 学宝

      

      都不能

    * 程丽京

      

      最后一个可以吧

    * 王晋川

      

      不

    * 学宝

      

      除非name在前

    * 高明

      

      第三个好像走

    * 朱志宏

      

      第三个好像可以

    * 高明

      

      能

    * 高明

      

      哈哈

    * 朱志宏

      

      优化器

    * 范毓

      

      优化器skr

    * 张宪明

      

      有个name的索引

    * 曹志

      

      优秀

    * 学宝

      

      吆西

    * 许超

      

      select* from user where name=‘’ and sex=‘’如何走索引

    * 李春扬

      

      只要带第一个字段就行吗？

    * 徐彬

      

      如果是3个次序不一样呢

    * 学宝

      

      三个只要有name就走索引

    * 谭伟

      

      为什么只要有组合索引的第一个·就走索引呢

    * 程丽京

      

      name和sex组合不走吧

    * 黄助教

      

      name,set不走

    * 甘雄风

      

      为啥 name sex 不走索引呢？

    * 程丽京

      

      不符合最左匹配原则

    * 詹子熙

      

      name,sex 走索引，只用到name索引

    * 许超

      

      select id from user where name='' 会不会回表

    * 程丽京

      

      不会

    * 詹子熙

      

      不会

    * 黄助教

      

      name/name,age/name,age,sex组合

    * 高明

      

      哈哈哈

    * 程丽京

      

      666

    * 高明

      

      很形象

    * 魏晨朝

      

      666

    * 张宪明

      

      这个66

    * 曹志

      

      带头大哥是叫慕容博吧

    * 谭伟

      

      绕口令啊

    * 罗志豪

      

      段了是全表扫描吗？

    * 雷帅锋

      

      用到第一个也是用到索引了啊

    * 张宪明

      

      还可以解释下那个口令吗

    * 学宝

      

      明白了

    * 谭伟

      

      能打开那个绕口令嘛

    * 詹子熙

      

      断了就只用前面的索引

    * 吴亚洲

      

      name age sex 变成 sex age name 也是可以的吧？？

    * 高明

      

      嗯

    * 柳亚婷

      

      优化器会按照索引顺序优化的

    * 罗志豪

      

      那用不到的就是全表扫描咯

    * 罗志豪

      

      对了之前不是说那个范围查询后面的索引字段是失效的吗，那Like和In呢？

    * 程丽京

      

      like'张%'走索引，like'%三'不走索引

    * 高明

      

      这么回事

    * 兰健

      

      用不用索引其实还跟索引数据占总数据量的比例有关来着

    * 詹子熙

      

      其实explain试一下就知道了

    * 黄助教

      

      对,实践出真知,哈哈

    * 高明

      

      哈哈

    * 詹子熙

      

      怎么看得到下一期的视频啊？

    * 吴亚洲

      

      2

    * 学宝

      

      谁有数据量几百上千万的表

    * 王加友

      

      搞起来

    * 学宝

      

      实践一下

    * 学宝

      

      不看球

    * 詹子熙

      

      中国打韩国

    * 王加友

      

      有国猪

    * 兰健

      

      国足牛逼

    * 兰健

      

      ！

    * 高明

      

      1

    * 陈磊

      

      中韩大战

    * 王晋川

      

      对啊德赫亚上身了刚才

    * 兰健

      

      可以蒿俊闵不上

    * 兰健

      

      可惜

    * 黄佐

      

      一边看球一边听课

    * 张福宝

      

      得多大瘾

    * 罗志豪

      

      牛逼

    * 王加友

      

      MRR

    * 陈磊

      

      多大的数据量需要建索引呢？

    * 罗志豪

      

      好

    * 詹子熙

      

      理解

    * 李春扬

      

      还行

    * 佘淮阳

      

      阔以

    * 王加友

      

      好

    * 李春扬

      

      没有写权限

    * 学宝

      

      mysql:mysql

    * 曹志

      

      chmod 777

    * 学宝

      

      组权限

    * 朱志宏

      

      刚刚断电了。。

    * 詹子熙

      

      看error日志

    * 曹志

      

      看看错误日志的权限

    * 程丽京

      

      看下日志文件路径

    * 张宪明

      

      重启试试

    * 张宪明

      

      重启mysql

    * 张晖

      

      上面的mysql目录啥情况？

    * 詹子熙

      

      重启一下试试

    * 学宝

      

      组只有读权限呀

    * 张晖

      

      目录是root：root

    * 詹子熙

      

      目录

    * 张宪明

      

      老师刚清日志是怎么清的

    * 张晖

      

      mysql目录是root:root

    * 程丽京

      

      777

    * 张晖

      

      不要777

    * 张晖

      

      755

    * 张晖

      

      关键是/var/log/mysql目录是root:root

    * 罗志豪

      

      var/log/mysql的目录不是root吗？

    * 张宪明

      

      然后再建一个同名的日志文件 好像不能追加

    * 詹子熙

      

      目录换到error.log的目录，应该就没问题了

    * 张宪明

      

      echo “” > slow.log

    * 张宪明

      

      才能在后面追加

    * 学宝

      

      重启吧

    * 张晖

      

      chown要-r

    * 张晖

      

      要递归的

    * 张宪明

      

      不是权限问题

    * 张晖

      

      当然是

    * 张晖

      

      就是父目录进不去，所以没法写入

    * 张宪明

      

      rm -rf 删除后，不重启不能追加

    * 高明

      

      哈哈

    * 罗志豪

      

      ok

    * 詹子熙

      

      中国输瓜了

    * 詹子熙

      

      222

    * 学宝

      

      ok

    * 高明

      

      ok

    * 吴亚洲

      

      ok

    * 王晋川

      

      都0比2了

    * 郁文忠

      

      xiabanhuijia

    * 学宝

      

      老师表数据也发下

    * 王加友

      

      正常，实力就在那儿

    * 高明

      

      ![img](https://static.csslcloud.net/img/em2/17.png)

    * 高明

      

      嗯

    * 郁文忠

      

      詹哥辛苦

    * 罗志豪

      

      辛苦了

    * Java三期讲师

      

      下课

    * 罗志豪

      

      88

    * 饶秋实

      

      老师再见

    * 许超

      

      下次上课时周六么

    

    对 所有人 说:

    [发送](javascript:void(0);)





![image-20190107205202730](/Users/changbingbing/Library/Application Support/typora-user-images/image-20190107205202730.png)